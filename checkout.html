<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>ShopSphere | Payment</title>

    <link rel="stylesheet" href="css/styles.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    />
  </head>
  <body style="background-color:#E6E6FA">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container">
        <a class="navbar-brand fw-bold" href="index.html">ShopSphere</a>
      </div>
    </nav>

    <div class="container mt-5">
      <h2 class="section-title">Checkout</h2>
      <div class="row">
        <div class="col-md-6">
          <h4>Billing Details</h4>
          <form id="payment-form">
            <div class="mb-3">
              <label for="fullName" class="form-label">Full Name</label>
              <input type="text" class="form-control" id="fullName" required />
            </div>
            <div class="mb-3">
              <label for="email" class="form-label">Email address</label>
              <input type="email" class="form-control" id="email" required />
            </div>
            <div class="mb-3">
              <label for="cardNumber" class="form-label">Card Number</label>
              <input type="text" class="form-control" id="cardNumber" placeholder="1234 5678 9012 3456" required />
            </div>
            <div class="row">
              <div class="col">
                <label for="expiry" class="form-label">Expiry</label>
                <input type="text" class="form-control" id="expiry" placeholder="MM/YY" required />
              </div>
              <div class="col">
                <label for="cvv" class="form-label">CVV</label>
                <input type="text" class="form-control" id="cvv" required />
              </div>
            </div>
            <div class="mt-4">
              <button type="submit" class="btn btn-primary w-100">Pay ₹<span id="checkout-total">0</span></button>
            </div>
          </form>
        </div>

        <div class="col-md-6">
          <h4>Order Summary</h4>
          <ul id="order-summary" class="list-group mb-3"></ul>
          <h5>Total Amount: ₹<span id="summary-total">0</span></h5>
        </div>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const cart = JSON.parse(localStorage.getItem("cart")) || [];
        const orderSummary = document.getElementById("order-summary");
        const checkoutTotal = document.getElementById("checkout-total");
        const summaryTotal = document.getElementById("summary-total");

        let totalAmount = 0;
        cart.forEach(item => {
          const itemTotal = item.price * item.quantity;
          totalAmount += itemTotal;

          const li = document.createElement("li");
          li.className = "list-group-item d-flex justify-content-between align-items-center";
          li.innerHTML = `
            ${item.name} x ${item.quantity}
            <span>₹${itemTotal}</span>
          `;
          orderSummary.appendChild(li);
        });

        checkoutTotal.textContent = totalAmount;
        summaryTotal.textContent = totalAmount;

        const paymentForm = document.getElementById("payment-form");
        paymentForm.addEventListener("submit", (e) => {
          e.preventDefault();
          alert("Payment Successful! Thank you for your purchase.");
          localStorage.removeItem("cart");
          window.location.href = "index.html";
        });
      });
    </script>
  </body>
</html>
